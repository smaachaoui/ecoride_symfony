CREATE TABLE reset_password_request (id INT AUTO_INCREMENT NOT NULL, selector VARCHAR(20) NOT NULL, hashed_token VARCHAR(100) NOT NULL, requested_at DATETIME NOT NULL, expires_at DATETIME NOT NULL, user_id INT NOT NULL, INDEX IDX_7CE748AA76ED395 (user_id), PRIMARY KEY (id)) DEFAULT CHARACTER SET utf8mb4;
CREATE TABLE covoiturage (id INT AUTO_INCREMENT NOT NULL, ville_depart VARCHAR(255) NOT NULL, ville_arrivee VARCHAR(255) NOT NULL, date_depart DATETIME NOT NULL, prix NUMERIC(10, 2) NOT NULL, places_restantes INT NOT NULL, ecologique TINYINT NOT NULL, utilisateur_id INT NOT NULL, vehicule_id INT NOT NULL, INDEX IDX_28C79E89FB88E14F (utilisateur_id), INDEX IDX_28C79E894A4A3511 (vehicule_id), PRIMARY KEY (id)) DEFAULT CHARACTER SET utf8mb4;
CREATE TABLE avis (id INT AUTO_INCREMENT NOT NULL, note INT NOT NULL, commentaire LONGTEXT DEFAULT NULL, statut VARCHAR(20) NOT NULL, created_at DATETIME NOT NULL, utilisateur_id_id INT NOT NULL, covoiturage_id_id INT NOT NULL, INDEX IDX_8F91ABF0B981C689 (utilisateur_id_id), INDEX IDX_8F91ABF07F316F4D (covoiturage_id_id), PRIMARY KEY (id)) DEFAULT CHARACTER SET utf8mb4;
CREATE TABLE utilisateur (id INT AUTO_INCREMENT NOT NULL, pseudo VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, credits INT DEFAULT NULL, role VARCHAR(50) NOT NULL, roles_system JSON NOT NULL, is_profile_configured TINYINT DEFAULT NULL, is_suspended TINYINT DEFAULT NULL, photo VARCHAR(255) DEFAULT NULL, created_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_1D1C63B386CC499D (pseudo), UNIQUE INDEX UNIQ_1D1C63B3E7927C74 (email), PRIMARY KEY (id)) DEFAULT CHARACTER SET utf8mb4;
CREATE TABLE vehicule (id INT AUTO_INCREMENT NOT NULL, modele VARCHAR(255) NOT NULL, marque VARCHAR(255) NOT NULL, immatriculation VARCHAR(255) NOT NULL, energie ENUM('Essence', 'Diesel', 'Electrique', 'Hybride'), date_premiere_immatriculation DATE NOT NULL, places_disponibles INT NOT NULL, utilisateur_id INT NOT NULL, INDEX IDX_292FFF1DFB88E14F (utilisateur_id), PRIMARY KEY (id)) DEFAULT CHARACTER SET utf8mb4;
CREATE TABLE participation (id INT AUTO_INCREMENT NOT NULL, confirme TINYINT NOT NULL, credits_utilises INT NOT NULL, utilisateur_id INT NOT NULL, covoiturage_id INT NOT NULL, INDEX IDX_AB55E24FFB88E14F (utilisateur_id), INDEX IDX_AB55E24F62671590 (covoiturage_id), PRIMARY KEY (id)) DEFAULT CHARACTER SET utf8mb4;
CREATE TABLE preferences (id INT AUTO_INCREMENT NOT NULL, accepte_fumeurs TINYINT NOT NULL, accepte_animaux TINYINT NOT NULL, utilisateur_id INT NOT NULL, UNIQUE INDEX UNIQ_E931A6F5FB88E14F (utilisateur_id), PRIMARY KEY (id)) DEFAULT CHARACTER SET utf8mb4;
ALTER TABLE reset_password_request ADD CONSTRAINT FK_7CE748AA76ED395 FOREIGN KEY (user_id) REFERENCES utilisateur (id);
ALTER TABLE covoiturage ADD CONSTRAINT FK_28C79E89FB88E14F FOREIGN KEY (utilisateur_id) REFERENCES utilisateur (id);
ALTER TABLE covoiturage ADD CONSTRAINT FK_28C79E894A4A3511 FOREIGN KEY (vehicule_id) REFERENCES vehicule (id);
ALTER TABLE avis ADD CONSTRAINT FK_8F91ABF0B981C689 FOREIGN KEY (utilisateur_id_id) REFERENCES utilisateur (id);
ALTER TABLE avis ADD CONSTRAINT FK_8F91ABF07F316F4D FOREIGN KEY (covoiturage_id_id) REFERENCES covoiturage (id);
ALTER TABLE vehicule ADD CONSTRAINT FK_292FFF1DFB88E14F FOREIGN KEY (utilisateur_id) REFERENCES utilisateur (id);
ALTER TABLE participation ADD CONSTRAINT FK_AB55E24FFB88E14F FOREIGN KEY (utilisateur_id) REFERENCES utilisateur (id);
ALTER TABLE participation ADD CONSTRAINT FK_AB55E24F62671590 FOREIGN KEY (covoiturage_id) REFERENCES covoiturage (id);
ALTER TABLE preferences ADD CONSTRAINT FK_E931A6F5FB88E14F FOREIGN KEY (utilisateur_id) REFERENCES utilisateur (id);