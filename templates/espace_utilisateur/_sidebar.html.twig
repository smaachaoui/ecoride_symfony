{# templates/espace_utilisateur/_sidebar.html.twig #}

<div class="card border-0 shadow-sm sticky-top" style="top: 100px;">
    <div class="card-body p-0">
        {# En-tête profil #}
        <div class="p-4 bg-light-green text-center">
            {% if app.user.photo %}
                <img src="{{ asset('uploads/photos/' ~ app.user.photo) }}" 
                     alt="{{ app.user.pseudo }}" 
                     class="rounded-circle mb-2"
                     width="80" height="80"
                     style="object-fit: cover;">
            {% else %}
                <div class="rounded-circle bg-dark-green d-flex align-items-center justify-content-center mx-auto mb-2" 
                     style="width: 80px; height: 80px;">
                    <i class="bi bi-person text-white" style="font-size: 2rem;"></i>
                </div>
            {% endif %}
            <h5 class="mb-1 text-dark-green">{{ app.user.pseudo }}</h5>
            <span class="badge bg-dark-green">
                {% if app.user.role == 'CHAUFFEUR_PASSAGER' %}
                    Chauffeur & Passager
                {% elseif app.user.role == 'CHAUFFEUR' %}
                    Chauffeur
                {% else %}
                    Passager
                {% endif %}
            </span>
            <p class="mt-2 mb-0 small">
                <i class="bi bi-coin text-dark-green me-1"></i>
                <strong>{{ app.user.credits }}</strong> crédits
            </p>
        </div>

        {# Navigation tabs #}
        <nav class="nav flex-column" role="tablist">
            <a class="nav-link py-3 px-4 border-bottom text-dark active" 
               id="tab-info"
               data-bs-toggle="tab" 
               data-bs-target="#info" 
               role="tab"
               aria-controls="info"
               aria-selected="true">
                <i class="bi bi-person me-2"></i>Informations personnelles
            </a>
            {% if app.user.isChauffeur %}
                <a class="nav-link py-3 px-4 border-bottom text-dark" 
                   id="tab-vehicules"
                   data-bs-toggle="tab" 
                   data-bs-target="#vehicules" 
                   role="tab"
                   aria-controls="vehicules"
                   aria-selected="false">
                    <i class="bi bi-car-front me-2"></i>Mes véhicules
                    <span class="badge bg-secondary float-end">{{ app.user.vehicules|length }}</span>
                </a>
                <a class="nav-link py-3 px-4 border-bottom text-dark" 
                   id="tab-preferences"
                   data-bs-toggle="tab" 
                   data-bs-target="#preferences" 
                   role="tab"
                   aria-controls="preferences"
                   aria-selected="false">
                    <i class="bi bi-sliders me-2"></i>Mes préférences
                </a>
            {% endif %}
            <a class="nav-link py-3 px-4 text-dark" 
               id="tab-historique"
               data-bs-toggle="tab" 
               data-bs-target="#historique" 
               role="tab"
               aria-controls="historique"
               aria-selected="false">
                <i class="bi bi-clock-history me-2"></i>Historique
            </a>
        </nav>
    </div>
</div>